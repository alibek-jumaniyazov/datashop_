{% load static %}



<!-- Navbar -->

<nav>
    <div class="navtop">
        <div class="navtopCon">
            <div class="navtopLocation">
                <span>Adres: Urganch, Darital, 2-etaj</span>
            </div>
            <div class="navtopTelefon">
                <span>Biz bilan bog'lanish: (91) 995-88-86</span>
                <div>
                    <img src="{% static 'media/uzflag.svg' %}" alt="">
                    <select class="til">
                        <option value="UZB">UZB</option>
                        <option value="RUS">RUS</option>
                    </select>
                </div>
            </div>
        </div>
    </div>
    <div class="navBottom">
        <div class="navBottomCon">
            <a href="{% url 'home' %}">
                <div class="logo">
                    <img src="{% static 'media/datashoplogo.png' %}" alt="">
                </div>
            </a>
            <div class="category">
                <button id="kategoryBtn"><img src="{% static 'media/categoryLogo.svg' %}" alt="">Kategoriya</button>
            </div>
            <div class="navSerach">
                <input type="text" placeholder="Qidirish...">
                <button><img src="{% static 'media/search.svg' %}" alt=""></button>
            </div>
            <div class="navbottomBtns">
                <a href="{% url 'shopcart'%}">
                    {% load myapptags %}
                    {% shopcartcount user.id as count %}
                    <span class="korzinkaConunt">{{ count }}</span>
                    <button>
                        <img src="{% static 'media/korzinka.svg' %}" alt="">
                        <span>Savat</span>
                    </button>
                </a>
                <button>
                    <img src="{% static 'media/izbrene.svg' %}" alt="">
                    <span>Tanlangan</span>
                </button>
                {% if user.is_authenticated %}
                <button class="profilBtn">
                    <img src="{% static 'media/person.svg' %}" alt="">
                    <span>{{ user.username }}</span>
                </button>
                {% else %}
                <button>
                    <img src="{% static 'media/person.svg' %}" alt="">
                    <a href="{% url 'login' %}"><span class='textLogin'>Kirish</span></a>
                </button>
                {% endif %}
            </div>

            <!-- profil  -->

            <div class="profilBox">
                <span class="profilBoxName">{{ user.username }}</span>
                <div class="profilBoxBtns">
                    <button><img src="{% static 'media/person.svg' %}" alt=""><span>Shaxshiy kabinet</span></button>
                    <button><img src="{% static 'media/dastafka2.svg' %}" alt=""><span>Mening
                            Buyurtmalarim</span></button>
                    <button><img src="{% static 'media/bell.svg' %}" alt=""><span>Xabarlar</span></button>
                    <button><img src="{% static 'media/close.svg' %}" alt=""><a
                            href="{% url 'logout' %}"><span>Chiqish</span></a></button>
                </div>
            </div>
        </div>
    </div>
</nav>

<!-- mobile version navbar -->

<div class="resNav">
    <div class="resNavTop">
        <div class="logo">
            <a href="{% url 'home' %}">
                <img src="{% static 'media/datashoplogo.png' %}" alt="">
            </a>
        </div>
        <div class="resNavFlag">
            <i class="fa-solid fa-phone"></i>
            <div>
                <img src="{% static 'media/uzflag.svg' %}" alt="">
                <select class="til">
                    <option value="UZB">UZB</option>
                    <option value="RUS">RUS</option>
                </select>
            </div>
        </div>
    </div>
    <div class="navBottomCon">
        <div class="logo none">
            <img src="{% static 'media/datashoplogo.png' %}" alt="">
        </div>
        <div class="category">
            <button class="kategoryBtn" id="kategoryBtn"><img src="{% static 'media/categoryLogo.svg' %}"
                    alt=""></button>
        </div>
        <div class="navSerach">
            <input type="text" placeholder="Введите запрос...">
            <button><img src="{% static 'media/search.svg' %}" alt=""></button>
        </div>
    </div>
</div>

{% load mptt_tags %}

<div class="kategory">
    <div class="kategoryCon">
        <div class="kategorymain">
            <div class="categoryProducts">
                <button class="categoryProductsName"><span><img src="{% static 'media/laptop.svg' %}" alt=""> <span>Noutbuk</span> </span><i class="fa-solid fa-angle-right"></i></button>
                <ul class="categoryProduct" style="background-color: #FFFFFF;">
                    <ul>
                        <span>Ноутбуки по брендам</span>
                        <li>Asus</li>
                        <li>Hp</li>
                        <li>Acer</li>
                        <li>Lenova</li>
                        <li>Apple</li>
                        <li>Dell</li>
                        <li>MSI</li>
                    </ul>
                    <ul>
                        <span>Кулеры для ноутбуков</span>
                        <li>1 Кулерный</li>
                        <li>2 Кулерный</li>
                        <li>Пластиковые</li>
                        <li>Металлические</li>
                    </ul>
                    <ul>
                        <span>Сумки для ноутбуков</span>
                        <li></li>
                    </ul>
                </ul>
            </div>
        </div>
    </div>
</div>
</div>
<div class="closeKategory"></div>

<script>
    const categoryProducts = document.querySelectorAll('.categoryProducts')
    let lastSelected = null

    categoryProducts.forEach(categoryProduct => {
        const btn = categoryProduct.querySelector('.categoryProductsName')
        const ul = categoryProduct.querySelector('.categoryProduct')

        btn.onclick = () => {
            ul.classList.toggle('none')

            if (!ul.classList.contains('none')) {
                if (lastSelected != null) {
                    lastSelected.classList.add('none')
                }
                lastSelected = ul
            }
        }
    })
</script>